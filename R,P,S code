#include <iostream>
#include <cstdlib>

int player_score = 0;
int computer_score = 0;
int ties = 0;

std::string player_choice;
std::string computer_choice() {
	int computer_result = std::rand() % 3;
	if (computer_result == 0) {
		std::cout << "\nRock!\n";
		return "rock";
	}
	else if (computer_result == 1) {
		std::cout << "\nPaper!\n";
		return "paper";
	}
	else if (computer_result == 2) {
		std::cout << "\nScissors!\n";
		return "scissors";
	}
	return "error";
}

int main() {

	srand(static_cast<unsigned int>(time(NULL)));
	
  std::cout << "Welcome to Rock, Paper, Scissors!\n\n";
	
  while (true) {
		std::cout << "Choose your weapon\n";
		std::cin >> player_choice;

		if (player_choice == "score") {
			std::cout << "Player wins: " << player_score << "\nComputer wins: " << computer_score << "\nTies: " << ties << "\n\n";
			continue;
		}
		if (player_choice == "exit") {
			std::cout << "Thanks for playing!";
			return 0;
		}
		if (player_choice != "rock" && player_choice != "paper" && player_choice != "scissors") {
			std::cout << "Try again!\n\n";
			continue;
		}
		std::string comp_choice = computer_choice();

		if (player_choice == "rock") {
			if (comp_choice == "rock") {
				std::cout << "\n\nIt's a tie!\n\nGo again?/n";
				ties++;
			}
			else if (comp_choice == "scissors") {
				std::cout << "\n\nYou Win!\n\nGo again?\n";
				player_score++;
			}
			else if (comp_choice == "paper") {
				std::cout << "\n\nYou lose!\n\nGo again?\n";
				computer_score++;
			}
		}
		if (player_choice == "paper") {
			if (comp_choice == "paper") {
				std::cout << "\n\nIt's a tie!\n\nGo again?\n";
				ties++;
			}
			else if (comp_choice == "rock") {
				std::cout << "\n\nYou win!\n\nGo again?\n";
				player_score++;
			}
			else if (comp_choice == "scissors") {
				std::cout << "\n\nYou lose!\n\nGo again?\n";
				computer_score++;
			}
		}
		if (player_choice == "scissors") {
			if (comp_choice == "scissors") {
				std::cout << "\n\nIt's a tie!\n\nGo again?\n";
				ties++;
			}
			else if (comp_choice == "paper") {
				std::cout << "\n\nYou win!\n\nGo again?\n";
				player_score++;
			}
			else if (comp_choice == "rock") {
				std::cout << "\n\nYou lose!\n\nGo again?\n";
				computer_score++;
			}
		}
	}
}
